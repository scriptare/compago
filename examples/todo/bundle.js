!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);var n=(t=Object)=>EventTarget.prototype.isPrototypeOf(t.prototype)?t:function(){if("function"!=typeof EventTarget)return!1;try{class t extends EventTarget{}new t}catch(t){return!1}return!0}()&&t===Object?EventTarget:class extends t{constructor(){super(),Object.defineProperty(this,Symbol.for("c_fragment"),{value:document.createDocumentFragment(),enumerable:!1,writable:!0,configurable:!0})}addEventListener(...t){return this[Symbol.for("c_fragment")].addEventListener(...t)}removeEventListener(...t){return this[Symbol.for("c_fragment")].removeEventListener(...t)}dispatchEvent(...t){return this[Symbol.for("c_fragment")].dispatchEvent(...t)}};const i=Object.seal(Object.create(null)),o=t=>"object"==typeof t&&null!==t&&("[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t));class r extends(n()){constructor(t,{collection:e,storage:s}=i){return super(),r.definePrivate(this,{[Symbol.for("c_collection")]:e,[Symbol.for("c_storage")]:s,addEventListener:this.addEventListener.bind(this),removeEventListener:this.removeEventListener.bind(this),dispatchEvent:this.dispatchEvent.bind(this)}),this.set(t),this.constructor._getProxy(this,"",this,[this])}set(t){return Object.keys(this).forEach(t=>delete this[t]),Object.assign(this,t)}assign(t){return Object.assign(this,t)}merge(t,e=this){return Object.keys(t).forEach(s=>{const n=t[s],i=e[s];e[s]=o(i)&&o(n)?this.merge(n,i):e[s]=n}),e}get id(){return this[this.constructor.idAttribute]}toJSON(){return{...this}}read(t=i){return this.sync("read",t).then(e=>{if(!t.skip){this[t.method in this?t.method:"assign"](e)}return t.silent||this.dispatchEvent(new CustomEvent("sync",{detail:{emitter:this,response:e,options:t}})),e}).catch(e=>{throw this.dispatchEvent(new CustomEvent("error",{detail:{emitter:this,error:e,options:t}})),e})}write(t=i){return this.sync("write",t).then(e=>{if(o(e)&&!t.skip){this[t.method in this?t.method:"assign"](e)}return t.silent||this.dispatchEvent(new CustomEvent("sync",{detail:{emitter:this,response:e,options:t}})),e}).catch(e=>{throw this.dispatchEvent(new CustomEvent("error",{detail:{emitter:this,error:e,options:t}})),e})}erase(t=i){return this.sync("erase",t).then(e=>(t.silent||this.dispatchEvent(new CustomEvent("sync",{detail:{emitter:this,response:e,options:t}})),t.keep||this.dispose(),e)).catch(e=>{throw this.dispatchEvent(new CustomEvent("error",{detail:{emitter:this,error:e,options:t}})),e})}sync(t,e){const s=this[Symbol.for("c_collection")],n=s&&s.storage?s.storage:this[Symbol.for("c_storage")];return n?n.sync(t,this,e):Promise.reject(new Error("Storage is not defined."))}dispose({silent:t}=i){return t||this.dispatchEvent(new CustomEvent("dispose",{detail:{emitter:this}})),this}static definePrivate(t,e){Reflect.ownKeys(e).forEach(s=>{Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!0,configurable:!0})})}static _emitChanges(t,e,s,n){t.dispatchEvent(new CustomEvent("change",{detail:{emitter:t,path:`${e}:${s}`,previous:n}}))}static _getProxy(t,e,s,n){let i;return t[Symbol.for("c_model")]?(i=t,i[Symbol.for("c_model")]=s,i[Symbol.for("c_path")]=e):(i=new Proxy(t,this.proxyHandler),this.definePrivate(i,{[Symbol.for("c_model")]:s,[Symbol.for("c_path")]:e}),t===s&&(t[Symbol.for("c_model")]=i,s=i)),Object.keys(t).forEach(i=>{o(t[i])&&!n.includes(t[i])&&(n.push(t[i]),t[i]=this._getProxy(t[i],`${e}:${i}`,s,n))}),i}}r.idAttribute="_id",r.proxyHandler={set(t,e,s,n){if("symbol"==typeof e||Reflect.has(t,e)&&!t.propertyIsEnumerable(e))return Reflect.set(t,e,s,n),!0;if(function t(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){const n=Array.isArray(e),i=Array.isArray(s);let o,r,l;if(n&&i){if(r=e.length,r!==s.length)return!1;for(o=r;0!=o--;)if(!t(e[o],s[o]))return!1;return!0}if(n!==i)return!1;const a=e instanceof Date,c=s instanceof Date;if(a!==c)return!1;if(a&&c)return e.getTime()===s.getTime();const h=e instanceof RegExp,d=s instanceof RegExp;if(h!==d)return!1;if(h&&d)return e.toString()===s.toString();const u=Object.keys(e);if(r=u.length,r!==Object.keys(s).length)return!1;for(o=r;0!=o--;)if(!s.hasOwnProperty(u[o]))return!1;for(o=r;0!=o--;)if(l=u[o],!t(e[l],s[l]))return!1;return!0}return e!=e&&s!=s}(t[e],s))return!0;const i=t[Symbol.for("c_path")],l=t[Symbol.for("c_model")],a=t[e];return t[e]=o(s)?r._getProxy(s,`${i}:${e}`,l,[s]):s,r._emitChanges(l,i,e,a),!0},deleteProperty(t,e){if(!Reflect.has(t,e))return!0;if("symbol"==typeof e||!t.propertyIsEnumerable(e))return delete t[e],!0;const s=t[Symbol.for("c_path")],n=t[Symbol.for("c_model")],i=t[e];return delete t[e],r._emitChanges(n,s,e,i),!0}};var l=r;const a=Object.seal(Object.create(null));class c extends(n(Array)){constructor(t,e={}){const{storage:s,model:n,comparator:i}=e;super(),this.storage=s,this.Model=n||l,this.comparator=i,this._byId={},e.silent=!0,this._onModelEvent=this._onModelEvent.bind(this),t&&this.set(t,e)}set(t=[],e={}){const{keep:s,at:n,silent:i,unsorted:o}=e,r=this.comparator&&!Number.isInteger(n)&&!o,l=this._parseModels(t,e,r),[a,c]=l;let h=l[2];const d=[];if(!s){for(let t=this.length-1;t>=0;t-=1){const e=this[t];a.has(e)||d.push(e)}d.length&&this.unset(d,{save:e.save,silent:i})}if(c.length&&(r&&(h=!0),Number.isInteger(n)?super.splice(n,0,...c):super.push(...c)),h&&this.sort({silent:!0}),i)return this;let u=n;for(let t=0;t<c.length;t+=1)c[t].dispatchEvent(new CustomEvent("add",{detail:{emitter:c[t],at:u,sort:h,collection:this}})),Number.isInteger(n)&&(u+=1);return h&&this.dispatchEvent(new CustomEvent("sort",{detail:{emitter:this}})),(c.length||d.length)&&this.dispatchEvent(new CustomEvent("update",{detail:{emitter:this}})),this}unset(t,{silent:e,save:s}=a){let n=!1;const i=[].concat(t);for(let t=0;t<i.length;t+=1){const o=i[t],r=this.indexOf(o);~r&&(super.splice(r,1),n=!0,e||o.dispatchEvent(new CustomEvent("remove",{detail:{emitter:o,index:r,collection:this,save:s}})),this._removeReference(o),s||o.dispose())}return!e&&n&&this.dispatchEvent(new CustomEvent("update",{detail:{emitter:this}})),this}push(...t){return this.set(t,{keep:!0,skip:!0})}pop(){const t=this[this.length-1];return this.unset(t),t}unshift(...t){return this.set(t,{keep:!0,skip:!0,at:0})}shift(){const t=this[0];return this.unset(t),t}sort(t=a){if("function"==typeof t)super.sort(t);else{const{descending:e}=t;let s=t.comparator||this.comparator;if(!s)return this;if("string"==typeof s){const t=s;s=(s,n)=>{let i=s[t],o=n[t];if(e&&([i,o]=[o,i]),i!==o){if(i>o||void 0===i)return 1;if(i<o||void 0===o)return-1}return 0}}super.sort(s)}return t&&t.silent||this.dispatchEvent(new CustomEvent("sort",{detail:{emitter:this,options:t}})),this}reverse(){return super.reverse(),this.dispatchEvent(new CustomEvent("sort",{detail:{emitter:this}})),this}splice(t,e,...s){const n=t>=0?t:this.length+t,i=e>=0?e:this.length,o=this.slice(n,n+i);return this.unset(o),s&&s.length&&this.set(s,{keep:!0,skip:!0,at:t}),o}get(t){return this._byId[t]}where(t={},e){const s=Object.keys(t);return s.length?this[e?"find":"filter"](e=>{for(let n=0;n<s.length;n+=1){const i=s[n];if(t[i]!==e[i])return!1}return!0}):[]}read(t={}){return this.sync("read",t).then(e=>{this.set(e,t),t.silent||this.dispatchEvent(new CustomEvent("sync",{detail:{emitter:this,options:t}}))}).catch(e=>{throw this.dispatchEvent(new CustomEvent("error",{detail:{emitter:this,error:e,options:t}})),e})}toJSON(){return this.map(t=>t.toJSON())}sync(t,e){return this.storage?this.storage.sync(t,this,e):Promise.reject(new Error("Storage is not defined."))}dispose({silent:t,save:e}=a){return t||this.dispatchEvent(new CustomEvent("dispose",{detail:{emitter:this,save:e}})),this.unset(this,{silent:!0,save:e}),this}_parseModels(t,e,s){const{keep:n,skip:i}=e,o="string"==typeof this.comparator?this.comparator:void 0,r=new Set,l=[];let a=!1;const c=[].concat(t);for(let t=0;t<c.length;t+=1){const h=c[t],d=h instanceof this.Model,u=d?this[this.indexOf(h)]:this.get(h[this.Model.idAttribute]);if(u)n||r.add(u),i||d||(u.assign(h),s&&o&&(a=!0));else{const t=this._prepareModel(h,e);if(!t)continue;this._addReference(t),l.push(t)}}return[r,l,a]}_prepareModel(t,e){return"object"==typeof t&&(t instanceof l?t:(e.collection=this,new this.Model(t,e)))}_onModelEvent(t){const{type:e,detail:{emitter:s,collection:n,previous:i,path:o}}=t;("add"!==e&&"remove"!==e||n===this)&&("dispose"!==e?("change"===e&&o.startsWith(":"+s.constructor.idAttribute)&&(this._byId[i]=void 0,void 0!==s.id&&(this._byId[s.id]=s)),this.dispatchEvent(new CustomEvent(e,{detail:t.detail}))):this.unset(s,{save:!0}))}_addReference(t){t[Symbol.for("c_collection")]||(t[Symbol.for("c_collection")]=this),t.id&&(this._byId[t.id]=t),t.addEventListener("add",this._onModelEvent),t.addEventListener("remove",this._onModelEvent),t.addEventListener("dispose",this._onModelEvent),t.addEventListener("change",this._onModelEvent)}_removeReference(t){this._byId[t.id]=void 0,t[Symbol.for("c_collection")]===this&&(t[Symbol.for("c_collection")]=void 0),t.removeEventListener("add",this._onModelEvent),t.removeEventListener("remove",this._onModelEvent),t.removeEventListener("dispose",this._onModelEvent),t.removeEventListener("change",this._onModelEvent)}static get[Symbol.species](){return Array}}var h=c;const d=Object.seal(Object.create(null));class u extends(n()){constructor({url:t=window.location.origin,init:e}=d){super(),this.url=t,this.init=e}sync(t,e,{silent:s,patch:n,url:i=this.url,init:o=this.init}=d){const r={...o},{methods:l}=this.constructor;if(r.method=l[t],!r.method)return Promise.reject(new Error("Method is not found."));const a=this.constructor.isStored(e),c=!(!n||!e.changes)&&e.changes;return a&&(i+="/"+e.id,"write"===t&&(r.method=c?l.patch:l.update)),"write"===t&&(r.body=this.serialize(c||e)),s||this.dispatchEvent(new CustomEvent("request",{detail:{emitter:this,model:e,options:r}})),this.constructor.fetch(i,r).then(t=>{if(s||this.dispatchEvent(new CustomEvent("response",{detail:{emitter:this,model:e,options:r,response:t}})),t.ok||304===t.status)return this.deserialize(t);const n=new Error(t.status);throw n.response=t,n}).catch(t=>{throw t})}dispose({silent:t}=d){return t||this.dispatchEvent(new CustomEvent("dispose",{detail:{emitter:this}})),this}serialize(t){return JSON.stringify(t)}deserialize(t){const e=t.headers.get("content-type");return e&&~e.indexOf("application/json")?t.json():void 0}static fetch(t,e={}){return e.headers={...this.headers,...e.headers},window.fetch(t,e)}static isStored(t){return void 0!==t.id}}u.methods={write:"POST",erase:"DELETE",read:"GET",update:"PUT",patch:"PATCH"},u.headers={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"};const p=/(\w+)\s+?(.*)/,m=Object.seal(Object.create(null));class f extends HTMLElement{constructor({model:t}=m){super(),this.model=t;const{handlers:e,routes:s,observedAttributes:n}=this.constructor;this._handle=this._handle.bind(this),this[Symbol.for("c_fragment")]="",this[Symbol.for("c_modelAttributes")]=n.filter(t=>t.includes(":")),this[Symbol.for("c_modelAttributes")].length&&(this._onModelChange=this._onModelChange.bind(this)),this[Symbol.for("c_handlers")]=e?this._prepareHandlers(e):void 0,this._setEventHandlers(),s&&(this._onPopstateEvent=this._onPopstateEvent.bind(this),window.addEventListener("popstate",this._onPopstateEvent))}render(){return this.constructor.view&&this.constructor.view(this),this}addEventListener(t,e,s=m){const{handler:n,selector:i}=s;if(!n)return void super.addEventListener(t,e,s);this.removeEventListener(t,e,s),this[Symbol.for("c_handlers")]||(this[Symbol.for("c_handlers")]=new Map);let o=this[Symbol.for("c_handlers")].get(t),r=e;"string"==typeof r&&(r=this[r]),"function"==typeof r&&(o||(o=this[Symbol.for("c_handlers")].set(t,[]).get(t),super.addEventListener(t,this._handle)),o.push(i?[r,i]:r))}removeEventListener(t,e,s=m){const{handler:n,selector:i}=s;if(!n)return void super.removeEventListener(t,e,s);const o=this[Symbol.for("c_handlers")]&&this[Symbol.for("c_handlers")].get(t);if(o){if(i)o.forEach((t,s)=>{Array.isArray(t)&&e===t[0]&&i===t[1]&&o.splice(s,1)});else{const t=o.indexOf(e);~t&&o.splice(t,1)}o.length||(this[Symbol.for("c_handlers")].delete(t),super.removeEventListener(t,this._handle))}}navigate(t,{replace:e,silent:s}=m){const n=this._getFragment(t);if(this[Symbol.for("c_fragment")]===n)return!1;this[Symbol.for("c_fragment")]=n;const i=this.constructor.root+n;return this.constructor[Symbol.for("c_history")][e?"replaceState":"pushState"]({},document.title,i),s||this._checkUrl(),!0}dispose({silent:t,save:e}=m){t||this.dispatchEvent(new CustomEvent("dispose",{detail:{emitter:this}})),!e&&this.model&&this.model.dispose&&this.model.dispose(),this.model&&this[Symbol.for("c_modelAttributes")].length&&this.model.removeEventListener("change",this._onModelChange),this.model=void 0,this._setEventHandlers(!0),this.constructor.routes&&window.removeEventListener("popstate",this._onPopstateEvent);const s=this.parentNode;return s&&s.removeChild(this),this}connectedCallback(){this.model&&this._observeAttributes()}disconnectedCallback(){this.dispose()}attributeChangedCallback(t,e){this._dispatchAttributesEvent(t,e)}static debounce(t,e){let s;return function(...n){const i=this;clearTimeout(s),s=setTimeout((function(){s=void 0,t.apply(i,n)}),e)}}_handleBond(t,e,s){const{value:n="value",bond:i,parse:o,prevent:r}=s;r&&t.preventDefault();let l=!0!==i?i:e.getAttribute("data-bond");const a="function"==typeof o?o(e[n]):e[n];if(":"!==l[0])return void this.setAttribute(l,a);if(l=l.slice(1),!l.includes("."))return void(this.model[l]=a);let{model:c}=this;const h=l.split("."),d=h[h.length-1];for(let t=0;t<h.length-1;t+=1)c=c[h[t]];c&&(c[d]=a)}_prepareHandlers(t){const e=new Map;return Object.keys(t).forEach(s=>{let n,i,o=s;const r=s.match(p);r&&([,o,n]=r);let l=t[s];"object"==typeof l&&(i=l,l=i.bond?this._handleBond:i.handler,"string"==typeof i.parse&&(i.parse=this[i.parse])),"string"==typeof l&&(l=this[l]),"function"==typeof l&&(i&&"debounce"in i&&(l=f.debounce(l,i.debounce)),e.has(o)||e.set(o,[]),e.get(o).push(r||i?[l,n,i]:l))}),e}_handle(t){const e=t.type.toLowerCase(),s=this[Symbol.for("c_handlers")]&&this[Symbol.for("c_handlers")].get(e);if(s)for(let n=0;n<s.length;n+=1){let i,o,r=s[n];if(Array.isArray(s[n])&&([r,o,i]=s[n]),o)if("attributes"!==e){const e=t.target.closest(o);e&&this.contains(e)&&r.call(this,t,e,i)}else{const e=t.detail&&t.detail.attribute;e&&e.startsWith(o)&&r.call(this,t)}else r.call(this,t,void 0,i)}}_setEventHandlers(t){const e=t?"removeEventListener":"addEventListener",s=this[Symbol.for("c_handlers")],n=this._handle;return s?(s.forEach((t,s)=>this[e](s,n),this),this):this}_observeAttributes(){this.model&&this[Symbol.for("c_modelAttributes")].length&&(this.model.removeEventListener("change",this._onModelChange),this.model.addEventListener("change",this._onModelChange))}_onModelChange({detail:{path:t,previous:e}}){this[Symbol.for("c_modelAttributes")].some(e=>t.startsWith(e))&&this._dispatchAttributesEvent(t,e)}_dispatchAttributesEvent(t,e){this.dispatchEvent(new CustomEvent("attributes",{detail:{emitter:this,attribute:t,previous:e}}))}_getFragment(t){if(void 0!==t)return t.trim();const{root:e}=this.constructor;let s=decodeURIComponent(this.constructor[Symbol.for("c_location")].pathname);return e&&s.startsWith(e)&&(s=s.slice(e.length)),s}_onPopstateEvent(){this._getFragment()!==this[Symbol.for("c_fragment")]&&this._checkUrl()}_checkUrl(){this[Symbol.for("c_fragment")]=this._getFragment();const{routes:t}=this.constructor;if(!t)return!1;const e=Object.keys(t);for(let s=0;s<e.length;s+=1){const n=e[s],i=t[n].exec(this[Symbol.for("c_fragment")]);if(i){const t=i.groups,e=this.constructor[Symbol.for("c_location")],s=decodeURIComponent(e.hash),o={emitter:this,route:n,params:t,query:decodeURIComponent(e.search),hash:s};return this.dispatchEvent(new CustomEvent("route",{detail:o})),!0}}return!1}}f.observedAttributes=[],f.handlers=void 0,f.view=void 0,f.routes=void 0,f.root="",f[Symbol.for("c_history")]=window.history,f[Symbol.for("c_location")]=window.location;var g=f;function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}
/*!
 * @copyright 2017- Commenthol
 * @license
 */
var y=/([a-zA-Z_$][a-zA-Z_$0-9]{0,50})/,_=new RegExp("\\$\\+{".concat(y.source,"}"),"g"),E=new RegExp("^[?:]&".concat(y.source)),w=new RegExp("^[?:]<".concat(y.source,">([^]*)")),x=/([\\]?[()])/g,S=/\(\)/g;var N=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(t,e){var s={},n={};(t=t||"")instanceof RegExp&&((e=e||t.flags||"")||(t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.global&&(e+="g")),t=t.source);var i={count:0,groups:[""],names:[]},o=0,r=t.split(x);return{source:r.map((function(t,e){var l,a;switch(t){case"(":i.groups.push(""),i.names.push("");break;case")":a=i.groups.pop(),(l=i.names.pop())&&(n[l]=a.substr(1));break;default:"("===r[e-1]&&!/^\?[:!=]/.test(t)&&(o++,(l=w.exec(t))&&l[1]?(s[l[1]]?s[i.count++]=o:(i.names[i.names.length-1]=l[1],s[l[1]]=o),t=l[2]||"",")"!==r[e+1]||l[2]||(t="[^]+")):s[i.count++]=o,(l=E.exec(t))&&l[1]&&(t=n[l[1]]||""))}return i.groups=i.groups.map((function(e){return e+t})),t})).join("").replace(S,""),flags:e,groups:s,named:n}}(e,s);this.regex=new RegExp(n.source,n.flags),this.source=this.regex.source,this.groups=n.groups}var e,s,n;return e=t,(s=[{key:"exec",value:function(t){var e=this,s=this.regex.exec(t);return s&&(s.groups={},Object.keys(this.groups).forEach((function(t){s.groups[t]=s[e.groups[t]]}))),s}},{key:"test",value:function(t){return this.regex.test(t)}},{key:"toString",value:function(){return this.regex.toString()}},{key:Symbol.replace,value:function(t,e){var s=this,n=e;switch(v(n)){case"string":n=n.replace(_,(function(t,e){var n=s.groups[e];return null==n?"":"$"+s.groups[e]}));break;case"function":n=e.bind(this);break;default:return String(n)}return t.replace(this.regex,n)}},{key:Symbol.match,value:function(t){return this.exec(t)}},{key:Symbol.split,value:function(t){return t.split(this.regex)}},{key:Symbol.search,value:function(t){return t.search(this.regex)}}])&&b(e.prototype,s),n&&b(e,n),t}();
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const C=new WeakMap,k=t=>"function"==typeof t&&C.has(t),A="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,O=(t,e,s=null,n=null)=>{for(;e!==s;){const s=e.nextSibling;t.insertBefore(e,n),e=s}},M=(t,e,s=null)=>{for(;e!==s;){const s=e.nextSibling;t.removeChild(e),e=s}},j={},L={},T=`{{lit-${String(Math.random()).slice(2)}}}`,$=`\x3c!--${T}--\x3e`,P=new RegExp(`${T}|${$}`);class V{constructor(t,e){this.parts=[],this.element=e;const s=[],n=[],i=document.createTreeWalker(e.content,133,null,!1);let o=0,r=-1,l=0;const{strings:a,values:{length:c}}=t;for(;l<c;){const t=i.nextNode();if(null!==t){if(r++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:s}=e;let n=0;for(let t=0;t<s;t++)R(e[t].name,"$lit$")&&n++;for(;n-- >0;){const e=a[l],s=F.exec(e)[2],n=s.toLowerCase()+"$lit$",i=t.getAttribute(n);t.removeAttribute(n);const o=i.split(P);this.parts.push({type:"attribute",index:r,name:s,strings:o}),l+=o.length-1}}"TEMPLATE"===t.tagName&&(n.push(t),i.currentNode=t.content)}else if(3===t.nodeType){const e=t.data;if(e.indexOf(T)>=0){const n=t.parentNode,i=e.split(P),o=i.length-1;for(let e=0;e<o;e++){let s,o=i[e];if(""===o)s=H();else{const t=F.exec(o);null!==t&&R(t[2],"$lit$")&&(o=o.slice(0,t.index)+t[1]+t[2].slice(0,-"$lit$".length)+t[3]),s=document.createTextNode(o)}n.insertBefore(s,t),this.parts.push({type:"node",index:++r})}""===i[o]?(n.insertBefore(H(),t),s.push(t)):t.data=i[o],l+=o}}else if(8===t.nodeType)if(t.data===T){const e=t.parentNode;null!==t.previousSibling&&r!==o||(r++,e.insertBefore(H(),t)),o=r,this.parts.push({type:"node",index:r}),null===t.nextSibling?t.data="":(s.push(t),r--),l++}else{let e=-1;for(;-1!==(e=t.data.indexOf(T,e+1));)this.parts.push({type:"node",index:-1}),l++}}else i.currentNode=n.pop()}for(const t of s)t.parentNode.removeChild(t)}}const R=(t,e)=>{const s=t.length-e.length;return s>=0&&t.slice(s)===e},I=t=>-1!==t.index,H=()=>document.createComment(""),F=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
class W{constructor(t,e,s){this.__parts=[],this.template=t,this.processor=e,this.options=s}update(t){let e=0;for(const s of this.__parts)void 0!==s&&s.setValue(t[e]),e++;for(const t of this.__parts)void 0!==t&&t.commit()}_clone(){const t=A?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),e=[],s=this.template.parts,n=document.createTreeWalker(t,133,null,!1);let i,o=0,r=0,l=n.nextNode();for(;o<s.length;)if(i=s[o],I(i)){for(;r<i.index;)r++,"TEMPLATE"===l.nodeName&&(e.push(l),n.currentNode=l.content),null===(l=n.nextNode())&&(n.currentNode=e.pop(),l=n.nextNode());if("node"===i.type){const t=this.processor.handleTextExpression(this.options);t.insertAfterNode(l.previousSibling),this.__parts.push(t)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,i.name,i.strings,this.options));o++}else this.__parts.push(void 0),o++;return A&&(document.adoptNode(t),customElements.upgrade(t)),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const B=` ${T} `;class q{constructor(t,e,s,n){this.strings=t,this.values=e,this.type=s,this.processor=n}getHTML(){const t=this.strings.length-1;let e="",s=!1;for(let n=0;n<t;n++){const t=this.strings[n],i=t.lastIndexOf("\x3c!--");s=(i>-1||s)&&-1===t.indexOf("--\x3e",i+1);const o=F.exec(t);e+=null===o?t+(s?B:$):t.substr(0,o.index)+o[1]+o[2]+"$lit$"+o[3]+T}return e+=this.strings[t],e}getTemplateElement(){const t=document.createElement("template");return t.innerHTML=this.getHTML(),t}}
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const D=t=>null===t||!("object"==typeof t||"function"==typeof t),U=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class z{constructor(t,e,s){this.dirty=!0,this.element=t,this.name=e,this.strings=s,this.parts=[];for(let t=0;t<s.length-1;t++)this.parts[t]=this._createPart()}_createPart(){return new J(this)}_getValue(){const t=this.strings,e=t.length-1;let s="";for(let n=0;n<e;n++){s+=t[n];const e=this.parts[n];if(void 0!==e){const t=e.value;if(D(t)||!U(t))s+="string"==typeof t?t:String(t);else for(const e of t)s+="string"==typeof e?e:String(e)}}return s+=t[e],s}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}class J{constructor(t){this.value=void 0,this.committer=t}setValue(t){t===j||D(t)&&t===this.value||(this.value=t,k(t)||(this.committer.dirty=!0))}commit(){for(;k(this.value);){const t=this.value;this.value=j,t(this)}this.value!==j&&this.committer.commit()}}class X{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild(H()),this.endNode=t.appendChild(H())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=H()),t.__insert(this.endNode=H())}insertAfterPart(t){t.__insert(this.startNode=H()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;k(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=j,t(this)}const t=this.__pendingValue;t!==j&&(D(t)?t!==this.value&&this.__commitText(t):t instanceof q?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):U(t)?this.__commitIterable(t):t===L?(this.value=L,this.clear()):this.__commitText(t))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,s="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=s:this.__commitNode(document.createTextNode(s)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof W&&this.value.template===e)this.value.update(t.values);else{const s=new W(e,t.processor,this.options),n=s._clone();s.update(t.values),this.__commitNode(n),this.value=s}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let s,n=0;for(const i of t)s=e[n],void 0===s&&(s=new X(this.options),e.push(s),0===n?s.appendIntoPart(this):s.insertAfterPart(e[n-1])),s.setValue(i),s.commit(),n++;n<e.length&&(e.length=n,this.clear(s&&s.endNode))}clear(t=this.startNode){M(this.startNode.parentNode,t.nextSibling,this.endNode)}}class Z{constructor(t,e,s){if(this.value=void 0,this.__pendingValue=void 0,2!==s.length||""!==s[0]||""!==s[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=s}setValue(t){this.__pendingValue=t}commit(){for(;k(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=j,t(this)}if(this.__pendingValue===j)return;const t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=j}}class G extends z{constructor(t,e,s){super(t,e,s),this.single=2===s.length&&""===s[0]&&""===s[1]}_createPart(){return new K(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}class K extends J{}let Q=!1;(()=>{try{const t={get capture(){return Q=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();class Y{constructor(t,e,s){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=s,this.__boundHandleEvent=t=>this.handleEvent(t)}setValue(t){this.__pendingValue=t}commit(){for(;k(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=j,t(this)}if(this.__pendingValue===j)return;const t=this.__pendingValue,e=this.value,s=null==t||null!=e&&(t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive),n=null!=t&&(null==e||s);s&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=tt(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=j}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}const tt=t=>t&&(Q?{capture:t.capture,passive:t.passive,once:t.once}:t.capture)
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */;const et=new class{handleAttributeExpressions(t,e,s,n){const i=e[0];if("."===i){return new G(t,e.slice(1),s).parts}return"@"===i?[new Y(t,e.slice(1),n.eventContext)]:"?"===i?[new Z(t,e.slice(1),s)]:new z(t,e,s).parts}handleTextExpression(t){return new X(t)}};
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */function st(t){let e=nt.get(t.type);void 0===e&&(e={stringsArray:new WeakMap,keyString:new Map},nt.set(t.type,e));let s=e.stringsArray.get(t.strings);if(void 0!==s)return s;const n=t.strings.join(T);return s=e.keyString.get(n),void 0===s&&(s=new V(t,t.getTemplateElement()),e.keyString.set(n,s)),e.stringsArray.set(t.strings,s),s}const nt=new Map,it=new WeakMap;
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const ot=(t,...e)=>new q(t,e,"html",et),rt=(t,e)=>{const s=t.startNode.parentNode,n=void 0===e?t.endNode:e.startNode,i=s.insertBefore(H(),n);s.insertBefore(H(),n);const o=new X(t.options);return o.insertAfterNode(i),o},lt=(t,e)=>(t.setValue(e),t.commit(),t),at=(t,e,s)=>{const n=t.startNode.parentNode,i=s?s.startNode:t.endNode,o=e.endNode.nextSibling;o!==i&&O(n,e.startNode,o,i)},ct=t=>{M(t.startNode.parentNode,t.startNode,t.endNode.nextSibling)},ht=(t,e,s)=>{const n=new Map;for(let i=e;i<=s;i++)n.set(t[i],i);return n},dt=new WeakMap,ut=new WeakMap,pt=(mt=(t,e,s)=>{let n;return void 0===s?s=e:void 0!==e&&(n=e),e=>{if(!(e instanceof X))throw new Error("repeat can only be used in text bindings");const i=dt.get(e)||[],o=ut.get(e)||[],r=[],l=[],a=[];let c,h,d=0;for(const e of t)a[d]=n?n(e,d):d,l[d]=s(e,d),d++;let u=0,p=i.length-1,m=0,f=l.length-1;for(;u<=p&&m<=f;)if(null===i[u])u++;else if(null===i[p])p--;else if(o[u]===a[m])r[m]=lt(i[u],l[m]),u++,m++;else if(o[p]===a[f])r[f]=lt(i[p],l[f]),p--,f--;else if(o[u]===a[f])r[f]=lt(i[u],l[f]),at(e,i[u],r[f+1]),u++,f--;else if(o[p]===a[m])r[m]=lt(i[p],l[m]),at(e,i[p],i[u]),p--,m++;else if(void 0===c&&(c=ht(a,m,f),h=ht(o,u,p)),c.has(o[u]))if(c.has(o[p])){const t=h.get(a[m]),s=void 0!==t?i[t]:null;if(null===s){const t=rt(e,i[u]);lt(t,l[m]),r[m]=t}else r[m]=lt(s,l[m]),at(e,s,i[u]),i[t]=null;m++}else ct(i[p]),p--;else ct(i[u]),u++;for(;m<=f;){const t=rt(e,r[f+1]);lt(t,l[m]),r[m++]=t}for(;u<=p;){const t=i[u++];null!==t&&ct(t)}dt.set(e,r),ut.set(e,a)}},(...t)=>{const e=mt(...t);return C.set(e,!0),e});var mt;s(0);let ft=0;var gt=class extends l{constructor(t,e){super(t,e),this.set(Object.assign(this.defaults(),this)),this.uid=ft,ft+=1}defaults(){return{title:"empty todo...",order:this[Symbol.for("c_collection")].nextOrder(),completed:!1,editing:!1}}toggleComplete(){this.completed=!this.completed}};var vt=class extends h{constructor(t,e={}){super(t,Object.assign(e,{model:gt,comparator:"order"}))}completed(){return this.filter(t=>t.completed)}remaining(){return this.filter(t=>!t.completed)}nextOrder(){return this.length?this[this.length-1].order+1:1}};class bt extends g{constructor(){super(),this.model=new vt,this.render=this.render.bind(this)}connectedCallback(){super.connectedCallback(),this.setAttribute("data-filter","all"),this.model.addEventListener("add",this.render),this.model.addEventListener("remove",this.render),this.render()}getTodoModel(t){const e=t.closest("[data-lid]");if(e)return this.model[parseInt(e.getAttribute("data-lid"),10)]}toggleCompleted(t,e){const s=this.getTodoModel(e);s&&s.toggleComplete()}edit(t,e){const s=this.getTodoModel(e);if(s){s.editing=!0;const t=this.model.indexOf(s),e=this.querySelector(`[data-lid="${t}"] .edit`);e&&e.focus()}}updateOnEnter(t,e){13===t.which&&this.close(t,e)}revertOnEscape(t,e){const s=this.getTodoModel(e);s&&27===t.which&&(s.editing=!1)}close(t,e){const s=this.getTodoModel(e),n=e.value&&e.value.trim();s&&n&&(s.title=n,s.editing=!1)}destroy(t,e){const s=this.getTodoModel(e);s&&this.model.unset(s)}createOnEnter(t,e){const s=e.value.trim();13===t.which&&s&&(e.value="",this.model.push({title:s,order:this.model.nextOrder(),completed:!1}))}clearCompleted(){return this.model.unset(this.model.completed()),!1}toggleAllComplete(){const t=this.querySelector("#toggle-all").checked;this.model.forEach(e=>{e.completed=t})}onFilterButton(t,e){t.preventDefault();const s=e.getAttribute("href");this.navigate(s)}filter(t){this.setAttribute("data-filter",t)}onFilterRoute(t){this.filter(t.detail.params.filter)}}bt.observedAttributes=["data-filter",":"],bt.handlers={route:"onFilterRoute",attributes:{handler:"render",debounce:10},"keypress #new-todo":"createOnEnter","click #clear-completed":"clearCompleted","click #toggle-all":"toggleAllComplete","click #filters a":"onFilterButton","click .toggle":"toggleCompleted","dblclick label":"edit","click .destroy":"destroy","keypress .edit":"updateOnEnter","keydown .edit":"revertOnEscape","focusout .edit":"close"},bt.view=t=>{((t,e,s)=>{let n=it.get(e);void 0===n&&(M(e,e.firstChild),it.set(e,n=new X(Object.assign({templateFactory:st},s))),n.appendInto(e)),n.setValue(t),n.commit()})(function(t){const{model:e}=t,s=e.remaining().length,n=e.completed().length,i=t.getAttribute("data-filter"),o=e.map(t=>{const e=[];return t.completed&&e.push("completed"),t.editing&&e.push("editing"),e.join(" ")});return ot`
    <div>
      <header id="header">
        <h1>todos</h1>
        <input id="new-todo" class="new-todo" placeholder="What needs to be done?" autofocus />
      </header>
      <section id="main" class="main" ?hidden=${!e.length}>
        <input id="toggle-all" class="toggle-all" type="checkbox"
               .checked="${!s}" />
        <label for="toggle-all">Mark all as complete</label>
        <ul id="todo-list" class="todo-list">
          ${pt(e,t=>t.uid,(t,e)=>{const s=t.completed?"completed":"active",n="all"===i||i===s;return ot`
                        <li class="${o[e]}" ?hidden="${!n}" data-lid="${e}">
                          <div class="view">
                            <input class="toggle" type="checkbox" .checked="${t.completed}" />
                            <label>${t.title}</label>
                            <button class="destroy"></button>
                          </div>
                          <input class="edit" type="text" .value="${t.title}"/>
                        </li>`})}
        </ul>
      </section>
      <footer id="footer" class="footer" ?hidden="${!e.length}">
        <span id="todo-count" class="todo-count">
          <strong>${s}</strong> ${1===s?" item":" items"} left</span>
        <ul id="filters" class="filters">
          <li>
            <a href="/all" class="${"all"===i?"selected":""}">All</a>
          </li>
          <li>
            <a href="/active" class="${"active"===i?"selected":""}">Active</a>
          </li>
          <li>
            <a href="/completed" class="${"completed"===i?"selected":""}">Completed</a>
          </li>
        </ul>
        <button id="clear-completed"
                class="clear-completed"
                hidden="${!n}">Clear completed ${n}</button>
      </footer>
    </div>`}(t),t)},bt.root=window.location.pathname.slice(0,-1),bt.routes={filter:new N("/(?<filter>[^]+)")},customElements.define("todo-app",bt);var yt=bt;document.addEventListener("DOMContentLoaded",()=>{const t=new yt;document.querySelector("#todoapp").appendChild(t)})}]);